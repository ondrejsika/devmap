<html>
<head>
    <title>DevMap</title>
    <script type="text/javascript" src="leaflet/leaflet-src.js"></script>
    <link rel="stylesheet" type="text/css" href="leaflet/leaflet.css">
    <style type="text/css">
        body {margin: 0; }
    </style>
</head>
<body>
    <div id="map" class="map" style="width:100%;height:100%"></div>
    <div style="position:absolute;right:10px;top:10px;width:350px;background:white;padding:15px;">
        <h3>DevMap</h3>
        <p>
            north: <span id="north"></span>
            <br>south: <span id="south"></span>
            <br>east: <span id="east"></span>
            <br>west: <span id="west"></span>
        </p>
        <p>
            east-west: <span id="eastWest"></span>
            <br>north-south: <span id="northSouth"></span>
        </p>
        <p>
            zoom: <span id="zoom"></span>
        </p>
        <p>
            map width <input id="mapWidth" value="100%">
            <br>map height <input id="mapHeight" value="100%">
            <button onclick="setMapWidthHeight()">Set</button>
            <br><button onclick="dotCommaSwitch()">dot/comma</button>
        </p>
        <p>
            source <input id="mapSource" value="http://{s}.tile.osm.org/{z}/{x}/{y}.png">
            <button onclick="setMapSource()">Set</button>
        </p>
        <p>
            2013 <a href="http://ondrejsika.com">Ondrej Sika</a>
        </p>
    </div>
    <script type="text/javascript">
        var map = L.map('map').setView([49.7447656, 13.3752194], 13);

        getTiles = function(source){
            return L.tileLayer(source, {}).addTo(map);
        }

        var tiles = getTiles('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
        
        setMapSource = function(){
            map.removeLayer(tiles);
            tiles = getTiles(document.getElementById("mapSource").value)
        }

        L.polygon([
            [-180, 0],
            [180, 0]
        ]).addTo(map);
        L.polygon([
            [0, -180],
            [0, 180]
        ]).addTo(map);

        for(i = -90 ; i <= 90; i=i+10){
            L.polygon([
                [0+i, -180],
                [0+i, 180]
            ]).addTo(map);
        }
        for(i = -180 ; i <= 180; i=i+10){
            L.polygon([
                [-180, 0+i],
                [180, 0+i]
            ]).addTo(map);
        }

        var dotComma = ".";
        dotCommaSwitch = function(){
            if (dotComma == ".") {
                dotComma = ",";
                getCoords();
                return;
            }
            if (dotComma == ",") {
                dotComma = ".";
                getCoords();
                return;
            }
        }

        getCoords = function(){
            document.getElementById("north").innerHTML = map.getBounds().getNorth().toString().replace(".", dotComma);
            document.getElementById("south").innerHTML = map.getBounds().getSouth().toString().replace(".", dotComma);
            document.getElementById("east").innerHTML = map.getBounds().getEast().toString().replace(".", dotComma);
            document.getElementById("west").innerHTML = map.getBounds().getWest().toString().replace(".", dotComma);
            document.getElementById("eastWest").innerHTML = (map.getBounds().getEast() - map.getBounds().getWest()).toString().replace(".", dotComma);
            document.getElementById("northSouth").innerHTML = (map.getBounds().getNorth() - map.getBounds().getSouth()).toString().replace(".", dotComma);
            document.getElementById("zoom").innerHTML = map.getZoom();
        }

        setMapWidthHeight = function(){
            document.getElementById("map").style.width = document.getElementById("mapWidth").value;
            document.getElementById("map").style.height = document.getElementById("mapHeight").value;
        }

        map.on('move', getCoords);
        getCoords();
    </script>
</body>
</html>


